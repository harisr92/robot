#!/usr/bin/env ruby
# frozen_string_literal: true

$LOAD_PATH.unshift File.expand_path('../lib', __dir__)
require 'robot'

Dir["#{__dir__}/../config/*.rb"].each do |file|
  require file
end

# to make command in underscore
unless ARGV.empty? || ARGV[0].to_s.start_with?('-')
  ARGV[0] = ARGV[0].gsub(/::/, '/')
                   .gsub(/([A-Z]+)([A-Z][a-z])/, '\1_\2')
                   .gsub(/([a-z\d])([A-Z])/, '\1_\2')
                   .tr('-', '_')
                   .downcase
end

begin
  Robot::App.start
rescue StandardError => e
  shell = Thor::Shell::Color.new
  shell.say e.message, :red
  exit(false)
end
